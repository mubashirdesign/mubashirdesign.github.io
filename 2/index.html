<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.abedd7aa506f2bc3ef42.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Kanit:wght@300;400&display=swap);@keyframes random{15%{fill:#c33afc}30%{fill:#4d3bff}45%{fill:#f4ce2c}60%{fill:#a298e2}75%{fill:#ff8657}}@keyframes bounce-2{0%{transform:translateY(0)}50%{transform:translateY(-50px)}to{transform:translateY(0)}}*,:after,:before{margin:0;padding:0;box-sizing:inherit}html{font-size:62.5%;box-sizing:border-box}body{font-family:Kanit,sans-serif;background:linear-gradient(180deg,#9c27b0,#6a36d9);margin:0 auto;font-size:2rem;width:100%}a{text-decoration:none}li{list-style:none}pre[class*=language-]{background:#1c2049!important}.streakIcon{position:absolute;top:0;right:0}.smallBookIcon{fill:#5429c1}.torontoIcon{bottom:0;width:100%}.torontoIcon,.waveIcon{fill:#000;position:absolute;left:0}.waveIcon{top:0;height:auto;z-index:1}.wiresIcon{width:inherit;position:absolute}.codingIcon{height:50rem}.codingIcon-1,.codingIcon-2{fill:#d6d8e5}.codingIcon-1{opacity:.4}.codingIcon-3{fill:#b1b6c4}.codingIcon-4{fill:#c4c7d6}.codingIcon-5{fill:#38226d}.codingIcon-6{fill:#9c73ff}.codingIcon-7{fill:#8c50ff}.codingIcon-8{fill:#ffcea9}.codingIcon-9{fill:#ededed}.codingIcon-10{fill:#e5e5e5}.codingIcon-11{fill:#f4f4f4}.codingIcon-12{fill:#bfbfbf}.codingIcon-13{fill:#3a2c6d}.codingIcon-14{fill:#dceeff}.codingIcon-15{fill:#dbdbdb}.codingIcon-16{fill:#1e3779}.codingIcon-17{fill:#031f60}.codingIcon-18{fill:#b1b4c4}.codingIcon-19{fill:#9ea1af}.codingIcon-20{fill:#e4e7f2}.codingIcon-21{fill:#201d38}.codingIcon-22{opacity:.3}.codingIcon-23{fill:#a298e2}.codingIcon-24{fill:#f4ce2c}.codingIcon-25{fill:#4d3bff}.codingIcon-26{fill:#ff8657}.codingIcon-27{fill:#c33afc}.codingIcon-28{fill:#a6ce28}.codingIcon-29{fill:#bcd64d}.codingIcon-30{fill:#28221c}.codingIcon-31{fill:#fff;opacity:.07}.codingIcon-32{fill:#8da01f}.codingIcon-33{fill:#99b524}.codingIcon-34{fill:#e4e6ef}.bookIcon{height:35rem;margin-left:-20rem}.bookIcon-1{fill:#d6d8e5;opacity:.4}.bookIcon-2{fill:#252935}.bookIcon-3{fill:#2b303f}.bookIcon-4{fill:#3a4151}.bookIcon-5{fill:#e6e9ef}.bookIcon-6{fill:#f4f6f9}.bookIcon-7{fill:#e8a30a}.bookIcon-8{fill:#f9cb07}.bookIcon-9{fill:#ab210d}.bookIcon-10{fill:#ff582b}.bookIcon-11{fill:#a5ad00}.bookIcon-12{fill:#b9cc00}.bookIcon-13{opacity:.1}.bookIcon-14{fill:#3a2c6d}.bookIcon-15{fill:#ffcea9}.bookIcon-16{fill:#f4f4f4}.bookIcon-17{fill:#38226d}.bookIcon-18{fill:#9c73ff}.bookIcon-19{fill:#8c50ff}.bookIcon-20{fill:#ededed}.bookIcon-21{fill:#bfbfbf}.bookIcon-22{fill:#e5e5e5}.profileBuildingIcon{height:35rem}.profileBuildingIcon-1{fill:#dadce5}.profileBuildingIcon-2{fill:#f2f5f9}.profileBuildingIcon-3{fill:#b9cc00}.profileBuildingIcon-4{fill:#3a3a3a}.profileBuildingIcon-5{fill:#fff}.profileBuildingIcon-6{fill:#00e7ff}.profileBuildingIcon-7{fill:#443d31}.profileBuildingIcon-8{fill:#c6e800}.profileBuildingIcon-9{fill:#e4e7ef}.profileBuildingIcon-10{fill:#edf1f9}.profileBuildingIcon-11{fill:#6675ff}.profileBuildingIcon-12{fill:#84a6f4}.resourcesIcon{height:35rem}.resourcesIcon-1,.resourcesIcon-4,.resourcesIcon-15{fill:#d6d8e5}.resourcesIcon-1{opacity:.4}.resourcesIcon-2{fill:#b1b4c4}.resourcesIcon-3{fill:#9ea2b2}.resourcesIcon-5{fill:#f4f4f4}.resourcesIcon-6{fill:#9acc12}.resourcesIcon-7{fill:#e8bc05}.resourcesIcon-8{fill:#ef6848}.resourcesIcon-9{fill:#be4aed}.resourcesIcon-10{fill:#543526}.resourcesIcon-11{fill:#1b96ea}.resourcesIcon-12{fill:#ff5050}.resourcesIcon-13{fill:#32cec3}.resourcesIcon-14{fill:none;stroke:#d6d8e5;stroke-miterlimit:10;stroke-width:1.42px}.resourcesIcon-15{opacity:.3}.resourcesIcon-16{fill:#dd990e}.resourcesIcon-17{fill:#f9cb07}.resourcesIcon-18{fill:#cc8b09}.resourcesIcon-19{fill:#e8a30a}.resourcesIcon-20{fill:#f9ca06}.resourcesIcon-21{fill:#3a2c6d}.resourcesIcon-22{fill:#ffcea9}.resourcesIcon-23{fill:#38226d}.resourcesIcon-24{fill:#9c73ff}.resourcesIcon-25{fill:#8c50ff}.resourcesIcon-26{fill:#ededed}.resourcesIcon-27{fill:#d33d3d}.resourcesIcon-28{fill:#ff4d4d}.resourcesIcon-29{fill:#2b303f}.dribbbleIcon-1{fill:#e84c88}.dribbbleIcon-2{fill:#fff}h1{font-size:4rem;line-height:4rem}h2{font-size:3rem}h3{font-size:2rem}p{font-weight:100}.icon{fill:currentColor}.flex{display:flex}.hidden{display:none}.flex-direction-column{flex-direction:column}.space-between{justify-content:space-between}.align-items-center{align-items:center}.justify-content-center{justify-content:center}.margin-bottom-medium{margin-bottom:5rem}.margin-bottom-none{margin-bottom:0}.flex-wrap{flex-wrap:wrap}.text-align-center{text-align:center}.banner{background:linear-gradient(180deg,#6a36d9,#9c27b0);margin-bottom:0!important}.banner__content{color:#fff;z-index:2}@media only screen and (max-width:989px){.banner__content{flex-direction:column;margin-top:15rem}}@media only screen and (max-width:749px){.banner__content{text-align:center}.banner__content h2{margin-top:1rem}}.banner__content h2,.banner__content h3{font-weight:100}.banner__content h1{line-height:3.5rem}.banner__content h2{line-height:3rem}.banner__icons{display:flex;align-items:center}@media only screen and (max-width:749px){.banner__icons{justify-content:center}}.banner__icons--icon{transition:all .8s;margin-top:2rem;color:#fff}.banner__icons--icon:hover{color:#56e5fe}.banner__icons--icon:last-child{margin-left:1rem}.banner.container{height:90vh}@media only screen and (max-width:989px){.banner.container{height:100%}}.button{font-size:2rem;letter-spacing:.5rem;text-transform:uppercase;color:#56e5fe}.blog .container:first-child{height:50vh;background:linear-gradient(#6a36d9,#9c27b0);margin-bottom:0;box-shadow:inset 0 0 20px 0 rgba(0,0,0,.75);color:#fff}.blog .container:first-child h3{margin-top:1rem;font-weight:100;line-height:2rem}.blog .container__inner{margin-top:-10rem}.blog .container__inner p{margin-bottom:1.5rem}.blog .container__inner table{width:100%;margin-bottom:3rem}.blog .container__inner th{height:5rem;text-align:left}.blog .container__inner td,.blog .container__inner th{padding:1.5rem;border-bottom:1px solid #ddd}@media only screen and (max-width:749px){.blog .container__inner{padding:5rem;margin-top:-7rem}}@media only screen and (max-width:749px){.blog h1{font-size:2.5rem}}@media only screen and (max-width:749px){.blog h3{font-size:1.5rem}}.blogIndex .container:first-child{height:50vh;background:linear-gradient(#6a36d9,#9c27b0);margin-bottom:0;box-shadow:inset 0 0 20px 0 rgba(0,0,0,.75);color:#fff}.blogIndex .container:first-child h3{margin-top:1rem;font-weight:100;line-height:2rem}.blogIndex__container{display:flex;flex-direction:column;box-shadow:0 0 3px 0 rgba(0,0,0,.75);background-color:#6a36d9;color:#fff;padding:6rem;width:100%;height:100%;transition:all .1s ease-in;border-radius:20px}.blogIndex__container--title{margin-bottom:2rem}.blogIndex__container--date{color:#dfdfdf;margin-bottom:1rem}.blogIndex .container__inner{margin-top:-10rem;display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:2rem}@media only screen and (max-width:989px){.blogIndex .container__inner{grid-template-columns:1fr}}@media only screen and (max-width:749px){.blogIndex .container__inner{padding:5rem}}@media only screen and (max-width:500px){.blogIndex .container__inner{padding:0}}.header{width:100%;display:flex;justify-content:flex-end;position:fixed;background-color:#6a36d9;box-shadow:0 0 20px 0 rgba(0,0,0,.75);z-index:100;color:#fff}@media only screen and (max-width:749px){.header{justify-content:center}}.header__nav ul{display:flex}.header__nav ul li{padding:2rem}@media only screen and (max-width:749px){.header__nav ul li{padding:2rem 1rem}}.header__nav ul li a{color:#fff;transition:all .8s}.header__nav ul li a:hover{color:#56e5fe}.introduction__icon{margin-top:1rem}.introduction__icon>*{margin:1rem}.introduction__container{color:#d6d8e5;overflow:hidden;border-radius:20px;padding-top:10rem;padding-right:10rem;width:100%;height:100%;z-index:3;box-shadow:0 0 10px 0 rgba(0,0,0,.75);background-color:#1c2049;display:grid;grid-template-rows:[header-start] 7rem [header-end main-start] 1fr [main-end];grid-template-columns:[sidebar-start] 50rem [sidebar-end main-start] 1fr [main-end];max-width:80%}@media only screen and (max-width:749px){.introduction__container{max-width:95%}}.introduction__container--content>*{margin-bottom:2rem}.introduction__container--sidebar{grid-row:main-start/main-end;grid-column:main-start/main-end;display:flex;flex-direction:column;align-items:center}.introduction__container--header{grid-row:header-start/header-end;grid-column:main-start/main-end;color:#56e5fe}@media only screen and (max-width:749px){.introduction__container--header{margin:5rem 0}}@media only screen and (max-width:989px){.introduction__container{grid-template-columns:[sidebar-start] 10rem [sidebar-end main-start] 1fr [main-end]}.introduction__container .profileBuildingIcon{margin-left:-30rem;height:auto}}@media only screen and (max-width:749px){.introduction__container{grid-template-rows:[header-start] -webkit-max-content [header-end main-start] 1fr [main-end];grid-template-rows:[header-start] max-content [header-end main-start] 1fr [main-end];grid-template-columns:[main-start] 1fr [main-end];padding:2rem;text-align:center}.introduction__container .profileBuildingIcon{display:none}}.featured__container{width:80%;color:#fff}@media only screen and (max-width:749px){.featured__container{width:95%}}.featured__blogs{display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:2rem}@media only screen and (max-width:989px){.featured__blogs{grid-template-columns:1fr}}.featured__blog{display:flex;flex-direction:column;box-shadow:0 0 3px 0 rgba(0,0,0,.75);background-color:#1c2049;color:#fff;padding:6rem;width:100%;height:100%;transition:all .1s ease-in;border-radius:20px}.featured__blog--title{margin-bottom:2rem;font-weight:100;line-height:2rem}.featured__blog--excerpt{font-size:1.3rem}.featured__blog--date{color:#dfdfdf;margin-bottom:1rem;font-size:1.5rem}.featured__header{color:#56e5fe;font-weight:100}@media only screen and (max-width:749px){.featured__header{text-align:center}}.footer{width:100%;height:100%;margin-top:10rem}.footer__logo{background-color:#1c2049;padding:5rem;box-shadow:inset 0 0 20px 0 rgba(0,0,0,.75)}.footer__copyright,.footer__logo{display:flex;justify-content:center}.footer__copyright{color:#fff;padding:3rem}.resources a{color:#fff}.resources .container:first-child{height:50vh;background:linear-gradient(#6a36d9,#9c27b0);margin-bottom:0;box-shadow:inset 0 0 20px 0 rgba(0,0,0,.75);color:#fff}.resources .container:first-child h3{margin-top:1rem;font-weight:100;line-height:2rem}.resources .icon{height:3rem}.resources .container__inner{margin-top:-10rem}@media only screen and (max-width:749px){.resources .container__inner{padding:5rem;margin-top:-7rem}}.resources__row{display:grid;grid-template-columns:1fr 1fr 1fr;margin-top:5rem;border-top:5px solid #5429c1;padding-top:5rem}@media only screen and (max-width:749px){.resources__row{grid-template-columns:-webkit-max-content;grid-template-columns:max-content;border-top:none;border-left:5px solid #5429c1;padding-left:1rem;padding-top:0;margin-top:0}}.resources__row--letter{text-shadow:0 8px 0 #5429c1;font-size:3rem}.resources__row--item{color:#fff;transition:all .8s}.resources__row--item:hover{color:#9f79ff}@media only screen and (max-width:749px){.resources__row--item{margin-top:5rem}}.resources__header{text-shadow:0 8px 0 #5429c1;font-size:3rem}.contact .container:first-child{height:50vh;background:linear-gradient(#6a36d9,#9c27b0);margin-bottom:0;box-shadow:inset 0 0 20px 0 rgba(0,0,0,.75);color:#fff}.contact .container:first-child h3{margin-top:1rem;font-weight:100;line-height:2rem}.contact .container__inner{margin-top:-10rem;width:50%}@media only screen and (max-width:749px){.contact .container__inner{width:95%;padding:2rem}}.contact__button{align-self:center;margin:3rem 0;background-color:#6a36d9;padding:2rem 5rem;font-size:2rem;letter-spacing:.5rem;box-shadow:inset 0 0 39px 0 rgba(0,0,0,.75);cursor:pointer;border:none}.contact__field{padding:2rem;display:flex;flex-direction:column;align-self:flex-start;width:100%}.contact__field label{font-size:2rem;text-transform:uppercase;color:#6971b9;margin-bottom:1rem}.contact__field input,.contact__field textarea{color:#6a36d9;background-color:inherit;box-shadow:inset 0 0 39px 0 rgba(0,0,0,.75);border:none;border-bottom:1px solid #5600c7;transition:all 1s;padding:1rem;font-family:inherit}.contact__field input:-ms-input-placeholder,.contact__field textarea:-ms-input-placeholder{color:#313131;text-transform:uppercase}.contact__field input::placeholder,.contact__field textarea::placeholder{color:#313131;text-transform:uppercase}.terminal{font-size:1.5rem}@media only screen and (max-width:989px){.terminal{width:100%;margin-bottom:10rem;margin-top:2rem}}.container{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center;margin-bottom:10rem}.container__inner{color:#d6d8e5;overflow:hidden;border-radius:20px;padding:10rem;width:100%;height:100%;z-index:3;box-shadow:0 0 39px 0 rgba(0,0,0,.75);background-color:#1c2049;max-width:80%}@media only screen and (max-width:749px){.container__inner{max-width:95%}}.container__content{width:80%;display:flex;justify-content:space-around;align-items:center}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.29.2"/><title data-react-helmet="true">Applying discounts based on customer tags in Shopify | Mubashir Cheentavida | Front-End Developer | Portfolio</title><meta data-react-helmet="true" name="description" content="Mubashir | Portfolio | Experienced Web Developer accomplished in all stages of advanced web development, bringing forth expertise in design, development and a talented skill-set in solution architecture, integrations and devOps."/><meta data-react-helmet="true" property="og:title" content="Applying discounts based on customer tags in Shopify"/><meta data-react-helmet="true" property="og:description" content="Mubashir | Portfolio | Experienced Web Developer accomplished in all stages of advanced web development, bringing forth expertise in design, development and a talented skill-set in solution architecture, integrations and devOps."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Mubashir Cheentavida"/><meta data-react-helmet="true" name="twitter:title" content="Applying discounts based on customer tags in Shopify"/><meta data-react-helmet="true" name="twitter:description" content="Mubashir | Portfolio | Experienced Web Developer accomplished in all stages of advanced web development, bringing forth expertise in design, development and a talented skill-set in solution architecture, integrations and devOps."/><link rel="icon" href="/favicon-32x32.png?v=8b656e8f58c2b210b4fc430ca95bbfe4" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8b656e8f58c2b210b4fc430ca95bbfe4"/><link as="script" rel="preload" href="/webpack-runtime-52ad7adf40f97c4f4b15.js"/><link as="script" rel="preload" href="/framework-9b42486c583946d73188.js"/><link as="script" rel="preload" href="/app-091679ce48900f7c617e.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/35023ff9677fccb92e44f0ba296c7ba803428d1c-64aaed3204dd10f31d91.js"/><link as="script" rel="preload" href="/component---src-templates-blog-js-91bc86238d4451dfdd43.js"/><link as="fetch" rel="preload" href="/page-data\2\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2553362554.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="header"><nav class="header__nav"><ul><li><a href="/">Home</a></li><li><a href="/resources">Resources</a></li><li><a href="/blogIndex">Blog</a></li><li><a href="/contact">Contact</a></li></ul></nav></header><main><div class="blog"><div class="container"><div class="container__content"><div><h1>Applying discounts based on customer tags in Shopify</h1><h3>Using the Shopify Script Editor</h3><p style="margin-top:2rem">January 10 2020</p></div></div></div><div class="container"><div class="container__inner"><a class="button" href="/blogIndex">←Back</a><div style="margin-top:2rem"><p>This guide assumes you have access to the Shopify script editor which comes with Shopify Plus.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/dfd46a1ad8e153dc5f0cfdfc6f881640/d7abb/scripteditor.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 9%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAARElEQVQI15WMUQ6AMAxCd/+7OmPStBldyzr1AEry4AdoooNdHi4FM5Nld35hKyIpBh79ZINPwoOjwAy+nV/ax15bNeMC7eGeIC2BcisAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Script Editor"
        title="Script Editor"
        src="/static/dfd46a1ad8e153dc5f0cfdfc6f881640/5a190/scripteditor.png"
        srcset="/static/dfd46a1ad8e153dc5f0cfdfc6f881640/772e8/scripteditor.png 200w,
/static/dfd46a1ad8e153dc5f0cfdfc6f881640/e17e5/scripteditor.png 400w,
/static/dfd46a1ad8e153dc5f0cfdfc6f881640/5a190/scripteditor.png 800w,
/static/dfd46a1ad8e153dc5f0cfdfc6f881640/d7abb/scripteditor.png 959w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>First we'll initialize the customer in the ruby source code:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby">customer <span class="token operator">=</span> <span class="token constant">Input</span><span class="token punctuation">.</span>cart<span class="token punctuation">.</span>customer</code></pre></div>
<p>Then we'll want to make the function that applies the discount based on the passed parameter</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">applyDiscount</span></span> <span class="token punctuation">(</span>message<span class="token punctuation">,</span> discountAmount<span class="token punctuation">)</span></code></pre></div>
<p>In the function we'll loop through each line item in the cart and apply the discount by multiplying the line item price by the discount amount</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token constant">Input</span><span class="token punctuation">.</span>cart<span class="token punctuation">.</span>line_items<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>line_item<span class="token operator">|</span>
line_item<span class="token punctuation">.</span>change_line_price<span class="token punctuation">(</span>line_item<span class="token punctuation">.</span>line_price <span class="token operator">*</span> discountAmount<span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span>message<span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span>
<span class="token keyword">end</span></code></pre></div>
<p>If we wanted the tag discount to only apply on certain products we can wrap the condition with an if statement</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token constant">Input</span><span class="token punctuation">.</span>cart<span class="token punctuation">.</span>line_items<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>line_item<span class="token operator">|</span>
product <span class="token operator">=</span> line_item<span class="token punctuation">.</span>variant<span class="token punctuation">.</span>product<span class="token punctuation">.</span>product_type
<span class="token keyword">if</span> product <span class="token operator">==</span> <span class="token string">"Test"</span>
line_item<span class="token punctuation">.</span>change_line_price<span class="token punctuation">(</span>line_item<span class="token punctuation">.</span>line_price <span class="token operator">*</span> discountAmount<span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span>message<span class="token delimiter tag">}</span></span>"</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>Now that the function is defined we'll need to determine with the customer is logged in</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">if</span> customer</code></pre></div>
<p>Now we'll check for the specific tag that we are looking for</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">if</span> customer
  <span class="token keyword">if</span> customer<span class="token punctuation">.</span>tags<span class="token punctuation">.</span>include<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string">"TestDiscount"</span><span class="token punctuation">)</span>
  <span class="token comment">#apply discount on TestDiscount tag for 50% on products</span>
  applyDiscount <span class="token string">"Test Discount Applied"</span><span class="token punctuation">,</span> <span class="token number">0.5</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>And that's it! The test discount will apply 50% to all products if the tag is present on the customer logged in.
To avoid overlapping with discount codes inputted you will need to check if the discount code is null or not first.</p>
<p>Done.</p>
<p>End State below:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 654px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3d9843d47d6c21bd55a994ffdaaa3feb/68e9c/endstate.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABv0lEQVQ4y61TXZObMBDj///Cdjq53oAhBAgkYIy/QNWayz1cyTUP3RnNOgTLK1lkIa7QNsDHiNlFGOtwnzQsu9S2bTgqef4VUllkH21EWDfc2RfnMWkDy/5s4/ERe2XLssDMMxZjiBkhhOdEH1jXlQosZK8LEc779DtSZTaOI659j3Gc0A9D+uM7QikhnDnENI1JkVkstNZpmMyYBTOn03oC7cRC2YaT3nmQ9/6pd0e10rbs2g/oe4u67lFVNS6XC4qiQJ7nXF+hVEmoJE8m+1dlw3BLHijV4HR6Q17k+HH6CVUqErY4n2seVKWDbje+6xwVmASxR6Rat3dRm93ud3oQOKXjC0uaJJntXNrwgDyTLs/FP8EnoX0QGmRN26JtPbzDfykSdrwAi4KyVKXQDT0G3njLG2/GFpexQa8H3iYnDo4x8U/J5LKykkRV3eHX2zuqM9fNGWVXIW8KqK7E7+YdddvzUI3JaGhKFdlHkFQkwrqeqT9gZTBjWIl9vTJHO2IKbQw7JG9/gWQph213ZQ49TffJ1MVuNNiQ4OOL+fZDO5CsZ/NSvl6pVQhns8dBYiBXr/XeH9F4BY/oiC1/AOewkzfmCRdBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="End State"
        title="End State"
        src="/static/3d9843d47d6c21bd55a994ffdaaa3feb/68e9c/endstate.png"
        srcset="/static/3d9843d47d6c21bd55a994ffdaaa3feb/772e8/endstate.png 200w,
/static/3d9843d47d6c21bd55a994ffdaaa3feb/e17e5/endstate.png 400w,
/static/3d9843d47d6c21bd55a994ffdaaa3feb/68e9c/endstate.png 654w"
        sizes="(max-width: 654px) 100vw, 654px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p></div></div></div></div></main><footer class="footer"><div class="footer__logo"><img alt="Logo" src="/static/8b656e8f58c2b210b4fc430ca95bbfe4/2cb01/logo.png"/></div><div class="footer__copyright">© <!-- -->2020<!-- -->, Mubashir Design Inc</div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-dfda8d059abd9d0298c4.js"],"app":["/app-091679ce48900f7c617e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-b75ee322736187809114.js"],"component---src-pages-blog-index-js":["/component---src-pages-blog-index-js-04f72b4cec718b6790db.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-ab8ed909bd182654df78.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4ae340c3a2ece936aed1.js"],"component---src-pages-resources-js":["/component---src-pages-resources-js-2ae4b1cd5be65b72e32e.js"],"component---src-templates-blog-js":["/component---src-templates-blog-js-91bc86238d4451dfdd43.js"]};/*]]>*/</script><script src="/polyfill-dfda8d059abd9d0298c4.js" nomodule=""></script><script src="/component---src-templates-blog-js-91bc86238d4451dfdd43.js" async=""></script><script src="/35023ff9677fccb92e44f0ba296c7ba803428d1c-64aaed3204dd10f31d91.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-091679ce48900f7c617e.js" async=""></script><script src="/framework-9b42486c583946d73188.js" async=""></script><script src="/webpack-runtime-52ad7adf40f97c4f4b15.js" async=""></script></body></html>